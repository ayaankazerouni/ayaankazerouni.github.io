<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="hIU2NRFm9Pwt76Z9R8DR92m2-kC85IQw6eIS3Ag7y7U" />
  
  <meta name="robots" content="noindex">
  

	

	<title>Web-based Data Visualization with Vega-Lite - Ayaan M. Kazerouni</title>

	<link rel="stylesheet" href="/css/main.css" type="text/css">
  <link rel="stylesheet" href="/assets/academicons/css/academicons.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link rel="canonical" href="https://ayaankazerouni.org/courses/csc123/coursenotes/16-data-vis/">
	<script src="/assets/js/footnote-preview.js" ></script>
</head>



<body>
  <main>
  
  
  
  <p>
  <a href="/courses/csc123/coursenotes">Coursenotes index</a> | <a href="/courses/csc123/fall2025">CSC 123 Introduction to Community Action Computing</a>
  <!-- <a href="/teaching">Ayaan M. Kazerouni <i class="fa fa-sign-out-alt"></i></a> -->
  </p>
  
  <div class="nav-links">
    
    <a href="/courses/csc123/coursenotes/15-objects/">&larr; Previous</a>
    
    
  </div>
  <h1>Web-based Data Visualization with Vega-Lite</h1>
  <article>
      <ul id="markdown-toc">
  <li><a href="#using-vega-lite" id="markdown-toc-using-vega-lite">Using Vega-Lite</a></li>
  <li><a href="#in-class-activity-making-changes-yourself" id="markdown-toc-in-class-activity-making-changes-yourself">In-class Activity: Making changes yourself</a></li>
  <li><a href="#and-beyond" id="markdown-toc-and-beyond">And beyond</a></li>
</ul>

<p>So far, we have programmatically processed and analyzed datasets.
However, a useful additional tool in our toolkit for gathering insights from data is <strong>data visualization</strong>.</p>

<p>We’ll use Vega-Lite for data visualization.
Vega-Lite lets us define fairly complex charts using a very simple syntax of field names and values.</p>

<p>It’s important to know the kind of data we’re dealing with because that dictates what we can do while make charts based on the data.
You know about data types in TypeScript like <code class="language-plaintext highlighter-rouge">number</code>, <code class="language-plaintext highlighter-rouge">boolean</code>, <code class="language-plaintext highlighter-rouge">string</code>, or interfaces you create that are made up of these types.</p>

<p>In Vega-Lite, a similar concept exists.
It has its own (broader) categories of data that dictate how we can visualize it.</p>

<p>For example:</p>

<ul>
  <li><strong>Quantitative data</strong> is numerical—it can be used in mathematical calculations; we can do things like calculating the average of a list of quantities. For example, a student’s <em>age</em> or the number of <em>units</em> they are taking are examples of quantitative data.</li>
  <li><strong>Nominal data</strong> is data that can be labelled or classified into different categories. For example, a student’s <em>major</em> or <em>favourite colour</em> are examples of nominal data. Importantly, there is no order or sequence associated with nominal data. The colour Green doesn’t come before or after the colour Red, and the major Computer Science is not better or worse than the major Palaeontology.</li>
  <li><strong>Ordinal data</strong> is like nominal data, except that the labels do have natural orderings. For example, <em>months</em> are an example of ordinal data. Terms like January, February, etc. are labels, but there is a natural expected ordering between them. Another example are <em>letter grades</em> (i.e., A, A-, B+, etc.). Importantly, the “distance” between two labels of ordinal data is not known—we can’t calculate the “time difference” between events that occurred in January and February or the difference in score between A and B–scoring students.</li>
</ul>

<p>Consider the following data, showing the number of CS degrees awarded by Cal Poly each year from 2015 to 2019.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="nl">"degrees"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2016</span><span class="p">,</span><span class="w"> </span><span class="nl">"degrees"</span><span class="p">:</span><span class="w"> </span><span class="mi">144</span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2017</span><span class="p">,</span><span class="w"> </span><span class="nl">"degrees"</span><span class="p">:</span><span class="w"> </span><span class="mi">177</span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="nl">"degrees"</span><span class="p">:</span><span class="w"> </span><span class="mi">175</span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w"> </span><span class="nl">"degrees"</span><span class="p">:</span><span class="w"> </span><span class="mi">186</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>Each object has a <code class="language-plaintext highlighter-rouge">year</code> and a <code class="language-plaintext highlighter-rouge">degrees</code> value.
The <code class="language-plaintext highlighter-rouge">year</code> is <em>ordinal</em> (even though it looks like a number!).
The <code class="language-plaintext highlighter-rouge">degrees</code> value is <em>quantitative</em>.</p>

<h2 id="using-vega-lite">Using Vega-Lite</h2>

<p>Now that we have some data in hand, let’s start simply. We’ll make a <em>univariate</em> visualization of only one field: the number of degrees awarded (<code class="language-plaintext highlighter-rouge">degrees</code>). You can follow along in the <a href="http://vega.github.io/editor/">online Vega editor</a>. Write your chart specification in the editor pane on the left, and the chart will appear on the right.</p>

<p><strong>Visualizations in Vega-Lite are written as <a href="../11-objects/">Objects</a> with particular fields.</strong></p>

<p>To create a Vega-Lite visualization, we need to specify the <strong>data</strong>, a <strong>mark</strong>, and <strong>graphical encodings</strong>.
The data can be depicted as we’ve seen above, i.e., as an array.</p>

<p>Below, we’ll talk about the <strong>mark</strong> and <strong>graphical encoding</strong>.</p>

<h3 id="mark">Mark</h3>

<p><strong>A mark is the thing that is drawn to the screen.</strong>
There are number of mark types available in Vega.
Some examples you’re like to use this quarter are: <a href="https://vega.github.io/vega-lite/docs/bar.html">bar</a>, <a href="https://vega.github.io/vega-lite/docs/circle.html">circle</a>, <a href="https://vega.github.io/vega-lite/docs/line.html">line</a>, <a href="https://vega.github.io/vega-lite/docs/point.html">point</a>, <a href="https://vega.github.io/vega-lite/docs/rect.html">rect</a>, and <a href="https://vega.github.io/vega-lite/docs/text.html">text</a>.</p>

<p>But we’ll start with a simple mark: a <strong>point</strong>. Copy the following into the Vega editor.</p>

<p>(The <code class="language-plaintext highlighter-rouge">$schema</code> bit below acts sort of like an interface for this chart definition. It allows the editor to give us useful error messages if we make mistakes, for example, if we forget to provide data. Omitting it won’t cause an error, but it will make debugging more difficult.)</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">$schema</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://vega.github.io/schema/vega-lite/v5.json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">values</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2015</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">121</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2016</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">144</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">177</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2018</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">175</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2019</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">186</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">mark</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">point</span><span class="dl">"</span>
  <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>You can additional fields to the <code class="language-plaintext highlighter-rouge">"mark"</code> object, e.g., to set its color.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span><span class="nx">previous</span> <span class="nx">stuff</span> <span class="nx">stays</span> <span class="nx">the</span> <span class="nx">same</span>
<span class="dl">"</span><span class="s2">mark</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">point</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">color</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">firebrick</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With the code above, we’ve given the chart <strong>data</strong> and we’ve given it a <strong>mark</strong> (i.e., a shape to draw).
But we haven’t mapped the mark’s <em>position</em> to any specific fields in the data, so all the marks are drawn in the same place.</p>

<p>Since the points are not being spread out, the points just get drawn on top of each other.
To us, this appears like one single point was drawn.</p>

<p>Not a very meaningful chart!</p>

<p>What we need is a <strong>graphical encoding</strong>.</p>

<h3 id="encodings">Encodings</h3>

<p>A graphical encoding maps individual <em>fields</em> in the data (like <code class="language-plaintext highlighter-rouge">degrees</code>, for example) to <em>visual channels</em>.</p>

<p><strong>What’s a visual channel?</strong> A visual channel is, simply put, <em>stuff we can see</em>.
It is a way to control the appearance of marks in a data visualization, e.g., a point’s colour, size, or position.</p>

<p>Coming back to our chart, let’s map the <strong>position</strong> visual channel, specifically, the mark’s horizontal position, to the <code class="language-plaintext highlighter-rouge">degrees</code> field. Modify the chart by adding the <code class="language-plaintext highlighter-rouge">encoding</code> field as follows:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">$schema</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://vega.github.io/schema/vega-lite/v5.json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">values</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2015</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">121</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2016</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">144</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">177</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2018</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">175</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2019</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">186</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">mark</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">point</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">encoding</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">field</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">quantitative</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We told the chart to map the field <code class="language-plaintext highlighter-rouge">degrees</code> to the <code class="language-plaintext highlighter-rouge">x</code> axis (i.e., the horizontal position visual channel).</p>

<p>We should now see the following univariate (single-variable) scatterplot.</p>

<figure>
  <a href="scatterplot-1.png" target="_blank">
    
    <img src="scatterplot-1.png" alt="A simple chart showing dots along the x axis representing the number of degrees awarded each year." width="300px" />
    
  </a>

  <figcaption></figcaption>
</figure>

<p class="callout ponder">Notice that we specified that the <em>type</em> of data in the <code class="language-plaintext highlighter-rouge">degrees</code> field is quantitative.
This means Vega understands that it should treat the values as <em>numbers</em>.
<strong>What do you think are the consequences of this?</strong>
<br /><br />
Specifically, what if we had marked <code class="language-plaintext highlighter-rouge">degrees</code> as <code class="language-plaintext highlighter-rouge">nominal</code>, or left it blank?</p>

<details>
<summary>Expand to see the result.</summary>
We’d get the following. The degrees values are being treated as *categories* instead of *numbers*, so they’re not being distanced according to their values. Moreover, they're not even in the right order! That’s why its important to be clear about the types of data we’re dealing with at all times.


<figure>
  <a href="scatterplot-2.png" target="_blank">
    
    <img src="scatterplot-2.png" alt="A simple chart showing dots along the x axis representing the number of degrees awarded each year. The points are equally spaced apart, instead of according to their magnitudes." width="200px" />
    
  </a>

  <figcaption></figcaption>
</figure>

</details>

<h3 id="adding-another-variable">Adding another variable</h3>

<p>Let’s add a new dimension to our visualization.</p>

<p>We’ve already given the <code class="language-plaintext highlighter-rouge">x</code> channel something to draw, so we can’t give it more to draw.
Note that this is not really a limitation of the <em>computer</em>—the computer can draw pixels on the same position over and over again, like we saw in the first plot we made.</p>

<p>The limitation is with <em>humans</em>—we can’t handle too much information coming into one visual channel.</p>

<p>So here we will add marks to another visual channel—the <code class="language-plaintext highlighter-rouge">y</code> axis.</p>

<p>This is simple enough:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">$schema</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://vega.github.io/schema/vega-lite/v5.json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">values</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2015</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">121</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2016</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">144</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">177</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2018</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">175</span><span class="p">},</span>
      <span class="p">{</span><span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2019</span><span class="p">,</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">:</span> <span class="mi">186</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">mark</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">point</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">encoding</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">field</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">degrees</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">quantitative</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">y</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">field</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">year</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ordinal</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We add in an encoding for the <code class="language-plaintext highlighter-rouge">y</code> axis, telling it to plot points based on the <code class="language-plaintext highlighter-rouge">year</code>. Notice that we’ve marked the <code class="language-plaintext highlighter-rouge">year</code> as an ordinal data type. Please read about the different types of data earlier in this module to remind yourself of why that is.</p>

<figure>
  <a href="scatterplot-3.png" target="_blank">
    
    <img src="scatterplot-3.png" alt="A scatterplot showing the number of degrees awarded each year, with years on the y-axis and degrees on the x-axis." />
    
  </a>

  <figcaption></figcaption>
</figure>

<h2 id="in-class-activity-making-changes-yourself">In-class Activity: Making changes yourself</h2>

<p>What we have so far is a <em>scatterplot</em>. These are usually used when we want to plot two <strong>quantitative</strong> variables. However, here we are plotting one <em>quantitative</em> and one <em>ordinal</em> variable.</p>

<p>Make the following changes to the graph:</p>

<ul>
  <li>We’d like to plot <code class="language-plaintext highlighter-rouge">bar</code> marks instead of <code class="language-plaintext highlighter-rouge">point</code> marks.</li>
  <li>In <code class="language-plaintext highlighter-rouge">bar</code> charts, the bars usually go up, not to the right. Change the graph so that the number of degrees is represented by the height of the bars (as opposed to their length).</li>
</ul>

<h2 id="and-beyond">And beyond</h2>

<p>The lab activity that we release today will ask you to create more complex visualizations with Vega-Lite, and make use of additional features such as aggregations.</p>

<p>You <strong>strongly encouraged</strong> to peruse the <a href="https://vega.github.io/vega-lite/docs/">Vega-Lite documentation</a> for more ideas and information about how to use the library effectively.
In the final project, you will (in teams) be asked to create multiple visualizations using Vega-Lite, and I would love if you explored the documentation and experimented with various visualization types!</p>

<hr />

      <footer class="nav-links">
        
        <a href="/courses/csc123/coursenotes/15-objects/">&larr; Previous</a>
        
        
      </footer  >
  </article>
  
  
  </main>
</body>
</html>
