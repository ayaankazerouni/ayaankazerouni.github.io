<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="hIU2NRFm9Pwt76Z9R8DR92m2-kC85IQw6eIS3Ag7y7U" />

	<title>Comparators, lambdas, and method references - Ayaan M. Kazerouni</title>

	<link rel="stylesheet" href="/css/main.css" type="text/css">
  <link rel="stylesheet" href="/assets/academicons/css/academicons.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link rel="canonical" href="https://ayaankazerouni.org/courses/csc203/coursenotes/14-comparators/">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800,600' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>


<body>
  <main class="coursenotes">
  
  
  
  
  <p>
    (Coursenotes for <a href="/courses/csc203#course-schedule">CSC 203 Project-based Object-oriented Programming and Design</a>)
  </p>
  
  <h1>Comparators, lambdas, and method references</h1>
  <div class="content">
      <h2 id="overview">Overview</h2>

<p>This lesson provides more information about <code class="language-plaintext highlighter-rouge">Comparator</code>s in Java.
While conceptually simple, <code class="language-plaintext highlighter-rouge">Comparator</code>s are used here as a vehicle to introduce a number of new concepts and syntaxes that may be unfamiliar.
Specifically, in this lesson we will:</p>

<ul>
  <li>Recap what we learned about <code class="language-plaintext highlighter-rouge">Comparator</code>s in the previous lesson.</li>
  <li>Learn about <em>lambdas</em>, using <code class="language-plaintext highlighter-rouge">Comparator</code>s as a concrete usage example.</li>
  <li>Learn about <em>method references</em>, using <code class="language-plaintext highlighter-rouge">Comparator</code>s as a concrete usage example.</li>
</ul>

<p>The next lesson will dive into lambdas more deeply and <em>functional interfaces</em> more generally.</p>

<h2 id="recap">Recap</h2>

<p>In the <a href="../13-comparable-comparator/">previous lesson</a>, we learned about the <code class="language-plaintext highlighter-rouge">Comparable</code> and <code class="language-plaintext highlighter-rouge">Comparator</code> interfaces.
To recap the main difference between the two:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">Comparable</code> interface is used to define a “natural ordering” for objects of a given type. If you need to define an ordering for some data type (class) you have created, then you make that class implement the <code class="language-plaintext highlighter-rouge">Comparable</code> interface. This allows you to make instances of that class <em>comparable</em> to each other. A class that implements <code class="language-plaintext highlighter-rouge">Comparable</code> must implement a <code class="language-plaintext highlighter-rouge">compareTo</code> instance method.</li>
  <li>The <code class="language-plaintext highlighter-rouge">Comparator</code> interface is used to define orderings for classes that <em>don’t</em> have a natural ordering, or to define orderings in addition to a class’s natural ordering. This is useful when you are defining a comparison to help solve a particular problem. <code class="language-plaintext highlighter-rouge">Comparators</code> are usually not defined as instance methods for the objects being compared.</li>
</ul>

<p>We worked with an <code class="language-plaintext highlighter-rouge">Album</code> class that had the following fields. 
We’ll continue with the same example in this lesson.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">String title</code></li>
  <li><code class="language-plaintext highlighter-rouge">String artist</code></li>
  <li><code class="language-plaintext highlighter-rouge">int year</code></li>
  <li><code class="language-plaintext highlighter-rouge">double price</code></li>
</ul>

<p>(Assume that we have defined getter methods for all the instance variables above.)</p>

<p>There are many ways of defining <code class="language-plaintext highlighter-rouge">Comparator</code>s in Java.
We will explore them in this lesson, starting with the most basic (repeated from the previous lesson), and then consider some more convenient alternatives.</p>

<h2 id="defining-a-comparator-in-a-separate-class">Defining a <code class="language-plaintext highlighter-rouge">Comparator</code> in a separate class</h2>

<p>Recall that the <code class="language-plaintext highlighter-rouge">Comparator</code> interface defines one abstract method: <code class="language-plaintext highlighter-rouge">public int compare(Album a1, Album a2)</code>.</p>

<p>The simplest way to create a <code class="language-plaintext highlighter-rouge">Comparator</code> for <code class="language-plaintext highlighter-rouge">Album</code> objects is to create a separate class that implements the <code class="language-plaintext highlighter-rouge">Comparator</code> interface.</p>

<p>Let’s consider a comparator that compares albums by their <code class="language-plaintext highlighter-rouge">title</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// The Comparator interface only has one abstract method</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AlbumTitleComparator</span> <span class="kd">implements</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Album</span> <span class="n">a1</span><span class="o">,</span> <span class="nc">Album</span> <span class="n">a2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a1</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Comparator</code> above can be used in functions like <code class="language-plaintext highlighter-rouge">Collections.sort</code> like below.
We create a new instance of the comparator object, and pass that object as a second parameter to the <code class="language-plaintext highlighter-rouge">sort</code> function.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">albums</span> <span class="o">=</span> <span class="o">...;</span> <span class="c1">// Assume this list is populated</span>

<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AlbumTitleComparator</span><span class="o">();</span>
<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">albums</span><span class="o">,</span> <span class="n">titleComp</span><span class="o">);</span>
</code></pre></div></div>

<p>This version of the <code class="language-plaintext highlighter-rouge">sort</code> function will now use the specified comparator for the pairwise comparisons during the sorting process.
As a result, the list of albums will be sorted by the title name in ascending order.</p>

<p>In essence, we have <em>parameterised</em> the comparison procedure in the <code class="language-plaintext highlighter-rouge">sort</code> function, thereby making the <code class="language-plaintext highlighter-rouge">sort</code> function more generally usable.
Because we tell it what comparator to use, the same <code class="language-plaintext highlighter-rouge">sort</code> function can be used to sort objects using <em>any ordering we define</em>.
We only need to define comparators and pass them to the function as parameters.</p>

<h2 id="lambdas">Lambdas</h2>

<p>In the example above, we created a whole new class (<code class="language-plaintext highlighter-rouge">AlbumTitleComparator</code>) just to define a single function (the <code class="language-plaintext highlighter-rouge">compare</code> function).
What’s more, we created a new instance of the comparator only to pass it to the <code class="language-plaintext highlighter-rouge">sort</code> function.
We never called the <code class="language-plaintext highlighter-rouge">compare</code> function ourselves.</p>

<p>All this to say: all we <em>really</em> care about in that comparator class is the <code class="language-plaintext highlighter-rouge">compare</code> function.
Can we define it separately, instead of wrapping it in a class and creating a new object to hold the function?</p>

<p>This is where the <em>lambda</em> syntax comes in. Lambdas have the following basic “anatomy”:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(&lt;params&gt;) -&gt; &lt;lambda body&gt;;
</code></pre></div></div>

<p class="callout">A lambda is an anonymous function.</p>

<p>Since the lambda is a function, it has inputs (<code class="language-plaintext highlighter-rouge">&lt;params&gt;</code>) and it has a body (<code class="language-plaintext highlighter-rouge">&lt;lambda body&gt;</code>).
But, since it’s anonymous, it doesn’t have a name.
And this is okay!
The <em>writer</em> of a lambda is usually not the one who <em>calls</em> the lambda, so we often don’t need to name the function.</p>

<p>However, we <em>can</em> store the lambda in a variable that has a name, or we can pass lambdas to other functions as parameters.</p>

<h3 id="writing-a-comparator-using-a-lambda">Writing a comparator using a lambda</h3>

<p>With that in mind, let’s take a look at what a comparator looks like expressed as a lambda.
We’ll start simple, by defining a comparator that only compares <code class="language-plaintext highlighter-rouge">Album</code>s by their <code class="language-plaintext highlighter-rouge">title</code>.</p>

<p>When we create <code class="language-plaintext highlighter-rouge">Comparator</code>s, what we’re <em>really</em> trying to create is a <code class="language-plaintext highlighter-rouge">compare</code> function.
Lambdas allow us to do that without going through the steps of creating a new class that implements the <code class="language-plaintext highlighter-rouge">Comparator</code> interface.
The key thing is that our compiler still thinks of the resulting comparator as a <code class="language-plaintext highlighter-rouge">Comparator</code> object.</p>

<p>The code below defines a <code class="language-plaintext highlighter-rouge">Comparator</code> using the lambda syntax.
This code is considerably more concise than the previous example — in particular, we don’t need to create a new class.
This <code class="language-plaintext highlighter-rouge">titleComp</code> comparator can be used in the same way as the previous example.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
</code></pre></div></div>

<p>Let’s break down the code above.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">Comparator&lt;Album&gt; titleComp</code></strong> — Everything on the left-hand-side of the variable assignment should be familiar. We are declaring a variable of type <code class="language-plaintext highlighter-rouge">Comparator&lt;Album&gt;</code> called <code class="language-plaintext highlighter-rouge">titleComp</code>. This part is the same whether or not we use the lambda syntax.</li>
  <li>Everything on the right-hand-side of the variable assignment is the <em>lambda</em>. In particular, the lambda represents the <code class="language-plaintext highlighter-rouge">compare</code> function.
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">(a1, a2)</code></strong> — These are the two parameters to the <code class="language-plaintext highlighter-rouge">compare</code> function. Observe that we don’t need to specify the types of the parameters <code class="language-plaintext highlighter-rouge">a1</code> and <code class="language-plaintext highlighter-rouge">a2</code>. Because the lambda is being declared as a comparator of <code class="language-plaintext highlighter-rouge">Album</code>s, the compiler can infer these types.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">-&gt;</code></strong> — This is the separator between the lambda’s parameters and the function body.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">a1.getTitle().compareTo(a2.getTitle())</code></strong> — This expression<sup id="fnref:expression" role="doc-noteref"><a href="#fn:expression" class="footnote" rel="footnote">1</a></sup> is the body of the lambda. The expression as a whole evaluates to an <code class="language-plaintext highlighter-rouge">int</code>. Remember that the <code class="language-plaintext highlighter-rouge">compare</code> function <em>must</em> return an <code class="language-plaintext highlighter-rouge">int</code>, so if this expression evaluates to anything but an <code class="language-plaintext highlighter-rouge">int</code>, your program won’t compile.</li>
    </ul>
  </li>
</ul>

<p>In most cases, lambdas are single-line functions that return values.
If a lambda has only one line, and that line is an expression, there is no need to use the <code class="language-plaintext highlighter-rouge">return</code> keyword.
The value of that expression is returned implicitly.</p>

<p>We can write same lambda in “long form”:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Album</span> <span class="n">a1</span><span class="o">,</span> <span class="nc">Album</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">a1</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>By using curly braces in the lambda, we can write functions that include multiple lines.
This is sometimes necessary, e.g., if you need to write code that uses loops.
At that point, the lambda starts to look like a “plain old function”, and you need to explicitly use the <code class="language-plaintext highlighter-rouge">return</code> keyword to return a value.</p>

<p>The lambdas above can be used in the same way we’ve already seen.
For example, if we want to sort a list of albums by title:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">albums</span> <span class="o">=</span> <span class="o">...;</span> <span class="c1">// Assume this list is populated</span>

<span class="c1">// Create the comparator using the lambda syntax</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>

<span class="c1">// Pass the comparator to the sort function</span>
<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">albums</span><span class="o">,</span> <span class="n">titleComp</span><span class="o">);</span>
</code></pre></div></div>

<p>In the example above, the comparator is a <em>value</em> that is passed to the <code class="language-plaintext highlighter-rouge">sort</code> function as a parameter.
You can write the function without first storing it in the <code class="language-plaintext highlighter-rouge">titleComp</code> variable.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">albums</span><span class="o">,</span> <span class="o">(</span><span class="nc">Album</span> <span class="n">a1</span><span class="o">,</span> <span class="nc">Album</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getTitle</span><span class="o">()));</span>
</code></pre></div></div>

<p>This time we <em>do</em> need to specify the types of <code class="language-plaintext highlighter-rouge">a1</code> and <code class="language-plaintext highlighter-rouge">a2</code>, because this time the compiler doesn’t have clues from which to infer the the types of those parameters.</p>

<h3 id="more-lambda-examples">More lambda examples</h3>

<h4 id="compare-albums-by-year-an-int">Compare albums by year (an <code class="language-plaintext highlighter-rouge">int</code>)</h4>

<p>Here is an example comparator that would compare two <code class="language-plaintext highlighter-rouge">Album</code>s by <code class="language-plaintext highlighter-rouge">year</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">yearComp</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getYear</span><span class="o">()</span> <span class="o">-</span> <span class="n">a2</span><span class="o">.</span><span class="na">getYear</span><span class="o">();</span>
</code></pre></div></div>

<p class="callout todo">Why does the code above work as a year comparator?</p>

<details>
  <summary>Hint</summary>
  <p>The <code class="language-plaintext highlighter-rouge">compare</code> function needs to return a positive integer if <code class="language-plaintext highlighter-rouge">a1</code>’s <code class="language-plaintext highlighter-rouge">year</code> is greater than <code class="language-plaintext highlighter-rouge">a2</code>’s <code class="language-plaintext highlighter-rouge">year</code>; a negative number <code class="language-plaintext highlighter-rouge">a1</code>’s <code class="language-plaintext highlighter-rouge">year</code> is less than <code class="language-plaintext highlighter-rouge">a2</code>’s <code class="language-plaintext highlighter-rouge">year</code>; and 0 if they are equal. We don’t care what the actual returned values are, as long as their signs are correct. Simply subtracting the two years successfully computes such an integer.</p>
</details>

<h4 id="compare-albums-by-price-a-double">Compare albums by price (a <code class="language-plaintext highlighter-rouge">double</code>)</h4>

<p class="callout todo">If we need to compare <code class="language-plaintext highlighter-rouge">Album</code>s by <code class="language-plaintext highlighter-rouge">price</code>, which is declared as a <code class="language-plaintext highlighter-rouge">double</code>, we can’t simply compute the difference between the two prices.
Why do you think this is?</p>

<details>
  <summary>Hint</summary>
  <p><a href="../02-arithmetic-and-testing/">The result of this difference will be a <code class="language-plaintext highlighter-rouge">double</code></a>, which does not match the required signature for the <code class="language-plaintext highlighter-rouge">compare</code> function.</p>
</details>
<p>So we <em>could</em> write the function in “long form”:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">priceComp</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">a1</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">a2</span><span class="o">.</span><span class="na">getPrice</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// or any positive integer</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">a1</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">a2</span><span class="o">.</span><span class="na">getPrice</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// or any negative integer</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Alternatively, the <a href="../03-lists-maps-existing-classes#boxed-primitives">boxed primitive types</a> provide a handy static function meant to do just this.
The above comparator can be written as:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">priceComp</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">a1</span><span class="o">.</span><span class="na">getPrice</span><span class="o">(),</span> <span class="n">a2</span><span class="o">.</span><span class="na">getPrice</span><span class="o">());</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Double.compare</code> function returns a positive number, negative number, or 0, as appropriate for its two given parameters.
Similarly, other primitive types provide similar static functions, e.g., <code class="language-plaintext highlighter-rouge">Long.compare</code>, <code class="language-plaintext highlighter-rouge">Float.compare</code>, etc.</p>

<h2 id="method-references--key-extractors">Method references / key extractors</h2>

<p>Finally, we can use the <em>method reference</em> or <em>key extractor</em> syntax.</p>

<p>You already know what <em>methods</em> are in Java.
You can <em>call</em> or <em>invoke</em> or <em>apply</em> methods on objects.
For example, <code class="language-plaintext highlighter-rouge">obj.someMethod()</code> will call <code class="language-plaintext highlighter-rouge">someMethod()</code> on the <code class="language-plaintext highlighter-rouge">obj</code> object.</p>

<p>However, it is also possible to simply “refer to” instance methods in Java, <em>without</em> calling them.
We do this using the method reference or “key extractor” syntax.</p>

<p>For example,</p>

<ul>
  <li>To refer to an instance method on a particular object, you would use: <code class="language-plaintext highlighter-rouge">obj::instanceMethodName</code>, where <code class="language-plaintext highlighter-rouge">obj</code> is some object you have created, and <code class="language-plaintext highlighter-rouge">instanceMethodName</code> is an instance method for that particular object.</li>
  <li>To refer to an instance method for any arbitrary object of a particular type, you would use <code class="language-plaintext highlighter-rouge">ClassName::instanceMethodName</code>, where <code class="language-plaintext highlighter-rouge">ClassName</code> is the name of a class, and <code class="language-plaintext highlighter-rouge">instanceMethodName</code> is an instance method in the class.</li>
</ul>

<p>These are useful because sometimes you end up creating lambdas that do nothing but call an existing method on an object.
In these cases, it’s easier and simpler to simply “point to” the method you want to call instead of creating a lambda that takes a parameter and calls an existing named method on that parameter.</p>

<h3 id="creating-a-comparator-using-a-method-reference">Creating a comparator using a method reference</h3>

<p>The <code class="language-plaintext highlighter-rouge">Comparator</code> interface provides a <code class="language-plaintext highlighter-rouge">Comparator.comparing</code> static method.
The <code class="language-plaintext highlighter-rouge">Comparator.comparing</code> method takes <strong>a lambda</strong> OR <strong>a method reference</strong> as a parameter.</p>

<p>If you give it a lambda, you define the lambda to follow the <code class="language-plaintext highlighter-rouge">compare</code> function signature.
You are more-or-less doing what we’ve already done above.</p>

<p>If you give it a method reference, you “point to” the method in the class that you want the comparator to use in its comparison, and it uses that method to create a <code class="language-plaintext highlighter-rouge">compare</code> function.</p>

<p>So here’s the third and final way in which we can create comparators:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getTitle</span><span class="o">);</span>
</code></pre></div></div>

<p>A few things to notice about the code above:</p>

<ul>
  <li>There are no parentheses (<code class="language-plaintext highlighter-rouge">()</code>) after the <code class="language-plaintext highlighter-rouge">getTitle</code>, because we are not <em>calling</em> the method; we are only referring to it.</li>
  <li>We use the key extractor to tell the <code class="language-plaintext highlighter-rouge">Comparator.comparing</code> method to create a new <code class="language-plaintext highlighter-rouge">Comparator</code> that calls <code class="language-plaintext highlighter-rouge">getTitle</code> on each of its parameters, and compares the results.</li>
  <li>It’s important that our method reference refers to a method that returns a <code class="language-plaintext highlighter-rouge">ComparABLE</code> value (e.g., a <code class="language-plaintext highlighter-rouge">String</code>, a primitive type, any class you create that implements <code class="language-plaintext highlighter-rouge">Comparable</code>). If the method we refer to returns some type that cannot be compared, then we can’t rely on this shorthand, because Java won’t know how to compare them.</li>
</ul>

<h2 id="chaining-comparators">Chaining comparators</h2>

<p>Remember <code class="language-plaintext highlighter-rouge">default</code> methods?
The <code class="language-plaintext highlighter-rouge">Comparator</code> defines a bunch of really useful <code class="language-plaintext highlighter-rouge">default</code> methods.
These methods are instance methods that exist on all <code class="language-plaintext highlighter-rouge">Comparator</code> objects (just like you’ve learned about <code class="language-plaintext highlighter-rouge">default</code> methods).</p>

<p>We know that the <code class="language-plaintext highlighter-rouge">Comparator</code> interface only defines one abstract method: <code class="language-plaintext highlighter-rouge">compare</code>.</p>

<h3 id="thencomparing"><code class="language-plaintext highlighter-rouge">thenComparing</code></h3>

<p>The <code class="language-plaintext highlighter-rouge">thenComparing</code> function lets us combine multiple comparators to create “composed” comparators.
For example, to deal with tie-breakers.</p>

<p>Suppose we want to compare <code class="language-plaintext highlighter-rouge">Album</code>s by <code class="language-plaintext highlighter-rouge">artist</code> name, and then for <code class="language-plaintext highlighter-rouge">Album</code>s with the same <code class="language-plaintext highlighter-rouge">artist</code> name, we want to compare them based on their <code class="language-plaintext highlighter-rouge">title</code>.
We can use the <code class="language-plaintext highlighter-rouge">thenComparing</code> function to chain an <strong>artist comparator</strong> and a <strong>title comparator</strong>.
The result will be a <em>third</em> comparator that is the combination of the previous two.</p>

<p>Like <code class="language-plaintext highlighter-rouge">Comparator.comparing</code>, <code class="language-plaintext highlighter-rouge">thenComparing</code> can take either a <strong>lambda</strong> or a <strong>method reference</strong> as a parameter, and returns a <code class="language-plaintext highlighter-rouge">Comparator</code> instance.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Written step-by-step</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">artistComp</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getArtist</span><span class="o">);</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getTitle</span><span class="o">);</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">artistTitleComp</span> <span class="o">=</span> <span class="n">artistComp</span><span class="o">.</span><span class="na">thenComparing</span><span class="o">(</span><span class="n">titleComp</span><span class="o">);</span>

<span class="c1">// Written in one statement</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">artistTitleComp</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getArtist</span><span class="o">).</span><span class="na">thenComparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getTitle</span><span class="o">);</span>

<span class="c1">// Sort albums by artist name, and sort by title for albums by the same artist</span>
<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">albums</span><span class="o">,</span> <span class="n">artistTitleComp</span><span class="o">);</span>
</code></pre></div></div>

<p>This is a concise and convenient way to quickly chain together multiple comparisons to create complex comparison criteria.
Because <code class="language-plaintext highlighter-rouge">thenComparing</code> returns a <code class="language-plaintext highlighter-rouge">Comparator</code>, you can chain together several <code class="language-plaintext highlighter-rouge">thenComparing</code> calls.</p>

<h3 id="reversed"><code class="language-plaintext highlighter-rouge">reversed</code></h3>

<p>Another handy <code class="language-plaintext highlighter-rouge">default</code> method on <code class="language-plaintext highlighter-rouge">Comparator</code>s is the <code class="language-plaintext highlighter-rouge">reversed</code> method.
It simply reverses the <code class="language-plaintext highlighter-rouge">Comparator</code> object on which it is called, and returns a new <code class="language-plaintext highlighter-rouge">Comparator</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Written step-by-step</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">titleComp</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getTitle</span><span class="o">);</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">reversed</span> <span class="o">=</span> <span class="n">titleComp</span><span class="o">.</span><span class="na">reversed</span><span class="o">();</span>

<span class="c1">// Written in one statement</span>
<span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Album</span><span class="o">&gt;</span> <span class="n">reversed</span> <span class="o">=</span> <span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Album:</span><span class="o">:</span><span class="n">getTitle</span><span class="o">).</span><span class="na">reversed</span><span class="o">();</span>

<span class="c1">// Sort albums in DESCENDING ORDER of title</span>
<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">albums</span><span class="o">,</span> <span class="n">reversed</span><span class="o">);</span>
</code></pre></div></div>

<p>Like <code class="language-plaintext highlighter-rouge">thenComparing</code>, <code class="language-plaintext highlighter-rouge">reversed</code> also returns a <code class="language-plaintext highlighter-rouge">Comparator</code> object.
This means that calls to <code class="language-plaintext highlighter-rouge">reversed</code> and <code class="language-plaintext highlighter-rouge">thenComparing</code> can be chained together to create various comparison combinations.</p>

<p class="callout todo">How would you use method references, <code class="language-plaintext highlighter-rouge">thenComparing</code>, and <code class="language-plaintext highlighter-rouge">reversed</code> to sort <code class="language-plaintext highlighter-rouge">Album</code>s by <code class="language-plaintext highlighter-rouge">year</code> in DESCENDING order, sorting <code class="language-plaintext highlighter-rouge">Album</code>s within the same year by <code class="language-plaintext highlighter-rouge">artist</code> in ASCENDING order, followed by <code class="language-plaintext highlighter-rouge">title</code> in ASCENDING order?</p>

<hr />
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:expression" role="doc-endnote">
      <p>Recall that an <em>expression</em> is anything that evaluates to a value. <a href="#fnref:expression" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

      <footer class="nav-links">
        
        <a href="/courses/csc203/coursenotes/13-comparable-comparator/" class="previous">&larr; Previous</a>
        
        
        <a href="/courses/csc203/coursenotes/15-lambdas/" class="next">Next &rarr;</a>
        
      </footer  >
  </div>
  
  
  </main>
</body>
</html>
